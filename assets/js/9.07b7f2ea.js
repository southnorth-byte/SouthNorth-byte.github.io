(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{449:function(s,a,t){s.exports=t.p+"assets/img/image-20230307102006593.f2cb59d8.png"},450:function(s,a,t){s.exports=t.p+"assets/img/image-20230307102807945.21749a2c.png"},451:function(s,a,t){s.exports=t.p+"assets/img/image-20230307103525240.bf4e1ff4.png"},452:function(s,a,t){s.exports=t.p+"assets/img/image-20230307104321357.6b8d5e77.png"},453:function(s,a,t){s.exports=t.p+"assets/img/image-20230307112433393.3d3071e9.png"},454:function(s,a,t){s.exports=t.p+"assets/img/image-20230307115709228.8c84cabe.png"},455:function(s,a,t){s.exports=t.p+"assets/img/image-20230307150812794.527e73bc.png"},527:function(s,a,t){"use strict";t.r(a);var e=t(2),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("本文演示操作环境为Docker Desktop + WSL2 + CentOS8！")])]),s._v(" "),a("h2",{attrs:{id:"什么是docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是docker"}},[s._v("#")]),s._v(" 什么是Docker？")]),s._v(" "),a("p",[s._v("关于 Docker 是什么并不太好说，下面我通过四点向你说明 Docker 到底是个什么东西。")]),s._v(" "),a("ul",[a("li",[s._v("Docker 是世界领先的软件容器平台，基于 "),a("strong",[s._v("Go 语言")]),s._v(" 进行开发实现。")]),s._v(" "),a("li",[s._v("Docker 能够自动执行重复性任务，例如搭建和配置开发环境，从而解放开发人员。")]),s._v(" "),a("li",[s._v("用户可以方便地创建和使用容器，把自己的应用放入容器。容器还可以进行版本管理、复制、分享、修改，就像管理普通的代码一样。")]),s._v(" "),a("li",[s._v("Docker 可以"),a("strong",[s._v("对进程进行封装隔离，属于操作系统层面的虚拟化技术。")]),s._v(" 由于隔离的进程独立于宿主和其它的隔离进程，因此也称其为容器。")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网地址：https://www.docker.com/"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"为什么要使用docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要使用docker"}},[s._v("#")]),s._v(" 为什么要使用Docker？")]),s._v(" "),a("p",[s._v("《Docker 从入门到实》一书中这样描述使用使用 Docker 的原因：作为一种新兴的虚拟化方式，Docker跟传统的虚拟化方式相比具有众多的优势，具体如下：")]),s._v(" "),a("ul",[a("li",[s._v("更高效的利用系统资源")])]),s._v(" "),a("p",[s._v("由于容器不需要进行硬件虚拟以及运行完整操作系统等额外开销，Docker对系统资源的利用率更高。无论是应用执行速度、内存损耗或者文件存储速度，都要比传统虚拟机技术更高效。因此，相比虚拟机技术，一个相同配置的主机，往往可以运行更多数量的应用。")]),s._v(" "),a("ul",[a("li",[s._v("更快速的启动时间")])]),s._v(" "),a("p",[s._v("传统的虚拟机技术启动应用服务往往需要数分钟，而Docker容器应用，由于直接运行于宿主内核，无需启动完整的操作系统，因此可以做到秒级、甚至毫秒级的启动时间。大大的节约了开发、测试、部署的时间。")]),s._v(" "),a("ul",[a("li",[s._v("一致的运行环境")])]),s._v(" "),a("p",[s._v("开发过程中一个常见的问题是环境一致性问题。由于开发环境、测试环境、生产环境不一致，导致有些bug并未在开发过程中被发现。而Docker的镜像提供了除内核外完整的运行时环境，确保了应用运行环境一致性，从而不会再出现「这段代码在我机器上没问题啊」这类问题。")]),s._v(" "),a("ul",[a("li",[s._v("持续交付和部署")])]),s._v(" "),a("p",[s._v("对开发和运维(DevOps)人员来说，最希望的就是一次创建或配置，可以在任意地方正常运行。使用Docker可以通过定制应用镜像来实现持续集成、持续交付、部署。开发人员可以通过Dockerfile来进行镜像构建，并结合持续集成(Continuous Integration)系统进行集成测试，而运维人员则可以直接在生产环境中快速部署该镜像，甚至结合持续部署(Continuous Delivery/Deployment)系统进行自动部署。而且使用Dockerfile使镜像构建透明化，不仅仅开发团队可以理解应用运行环境，也方便运维团队理解应用运行所需条件，帮助更好的生产环境中部署该镜像。")]),s._v(" "),a("p",[a("strong",[s._v("那么于我们而言，docker提高了我们的工作效率！")])]),s._v(" "),a("ul",[a("li",[s._v("Docker 允许开发者打包他们的应用及其依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。")]),s._v(" "),a("li",[s._v("传统的开发流程中，我们的项目通常需要使用 MySQL、Redis、MQ 等环境，这些都需要我们手动进行下载并配置，安装配置的流程极其复杂，而且不同系统下的操作也不尽相同。Docker 的出现完美地解决了这一问题，一行命令就可以完成MySQL等的启动与配置。")])]),s._v(" "),a("h2",{attrs:{id:"docker的安装与配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker的安装与配置"}},[s._v("#")]),s._v(" Docker的安装与配置")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[s._v("这部分内容请百度或者谷歌")])]),a("h3",{attrs:{id:"windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[s._v("#")]),s._v(" Windows")]),s._v(" "),a("h3",{attrs:{id:"mac"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mac"}},[s._v("#")]),s._v(" Mac")]),s._v(" "),a("h3",{attrs:{id:"linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[s._v("#")]),s._v(" Linux")]),s._v(" "),a("h2",{attrs:{id:"docker中的核心概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker中的核心概念"}},[s._v("#")]),s._v(" Docker中的核心概念")]),s._v(" "),a("p",[s._v("在正式学习 Docker 之前，我们需要了解 Docker 中的几个核心概念：")]),s._v(" "),a("h3",{attrs:{id:"镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像"}},[s._v("#")]),s._v(" 镜像")]),s._v(" "),a("p",[a("strong",[s._v("镜像就是一个只读的模板")]),s._v(" 。镜像可以用来创建 Docker 容器，一个镜像可以创建多个容器。")]),s._v(" "),a("h3",{attrs:{id:"容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器"}},[s._v("#")]),s._v(" 容器")]),s._v(" "),a("p",[a("strong",[s._v("容器是用镜像创建的运行实例")]),s._v(" 。Docker 利用容器独立运行一个或一组应用。它可以被启动、开始、停止、删除，每个容器都是相互隔离的、保证安全的平台。 可以把容器看作是一个简易的 Linux 环境和运行在其中的应用程序。容器的定义和镜像几乎一模一样，也是一堆层的统一视角，唯一区别在于容器的最上面那一层是可读可写的。")]),s._v(" "),a("h3",{attrs:{id:"仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#仓库"}},[s._v("#")]),s._v(" 仓库")]),s._v(" "),a("p",[a("strong",[s._v("仓库是集中存放镜像文件的场所")]),s._v(" 。仓库和仓库注册服务器是有区别的，仓库注册服务器上往往存放着多个仓库，每个仓库中又包含了多个镜像，每个镜像有不同的标签。 仓库分为 "),a("strong",[s._v("公开仓库")]),s._v(" 和 "),a("strong",[s._v("私有仓库")]),s._v(" 两种形式，最大的公开仓库是 DockerHub，存放了数量庞大的镜像供用户下载，国内的公开仓库有阿里云、网易云等。")]),s._v(" "),a("h3",{attrs:{id:"我的总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我的总结"}},[s._v("#")]),s._v(" 我的总结")]),s._v(" "),a("p",[s._v("通俗点说，"),a("strong",[s._v("一个镜像")]),s._v(" 就代表 "),a("strong",[s._v("一个软件")]),s._v(" ；而基于某个镜像运行就是生成一个程序实例，这个程序实例就是 "),a("strong",[s._v("容器")]),s._v(" ；而 "),a("strong",[s._v("仓库")]),s._v(" 是用来存储 Docker 中所有镜像的，其中仓库又分为 "),a("strong",[s._v("远程仓库")]),s._v(" 和 "),a("strong",[s._v("本地仓库")]),s._v(" 。与Maven 类似，倘若每次都从远程下载依赖，则会大大降低效率，为此，Maven 的策略是第一次访问依赖时，将其下载到本地仓库，第二次、第三次使用时直接用本地仓库的依赖即可，Docker 的远程仓库和本地仓库的作用也是类似的。")]),s._v(" "),a("h2",{attrs:{id:"docker初体验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker初体验"}},[s._v("#")]),s._v(" Docker初体验")]),s._v(" "),a("h3",{attrs:{id:"镜像仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像仓库"}},[s._v("#")]),s._v(" 镜像仓库")]),s._v(" "),a("p",[s._v("下面我们来对 Docker 进行一个初步的使用，这里以下载一个 Tomcat 的镜像为例(在CentOS8下进行)。和 GitHub 一样，Docker 也提供了一个 DockerHub 用于查询各种镜像的地址和安装教程，为此，我们先访问 DockerHub："),a("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com/"),a("OutboundLink")],1)]),s._v(" "),a("img",{attrs:{src:t(449)}}),s._v(" "),a("h3",{attrs:{id:"镜像搜索"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像搜索"}},[s._v("#")]),s._v(" 镜像搜索")]),s._v(" "),a("p",[s._v("在搜索框中输入 tomcat 并 Enter：")]),s._v(" "),a("p",[s._v("可以看到相关 tomcat 的镜像非常多，若右上角有"),a("code",[s._v("OFFICIAL IMAGE")]),s._v("标识，则说明是官方镜像，所以我们点击第一个 tomcat 镜像：")]),s._v(" "),a("img",{attrs:{src:t(450)}}),s._v(" "),a("h3",{attrs:{id:"镜像版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像版本"}},[s._v("#")]),s._v(" 镜像版本")]),s._v(" "),a("p",[s._v("黑色框中提供了下载 tomcat 镜像的指令为"),a("code",[s._v("docker pull tomcat")]),s._v("，但该指令始终会下载 tomcat 镜像的最新(latest)版本。")]),s._v(" "),a("p",[s._v("若是想下载指定版本的镜像，可通过 Fliter Tags 选择，我们以tomcat8为例：")]),s._v(" "),a("img",{attrs:{src:t(451)}}),s._v(" "),a("h3",{attrs:{id:"镜像拉取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像拉取"}},[s._v("#")]),s._v(" 镜像拉取")]),s._v(" "),a("p",[s._v("这里就可以看到tomcat8各种版本的镜像，右边有下载的指令，所以若是想下载 8.0.42 版本的 tomcat 镜像，则执行：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull tomcat:8.0.42\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"镜像加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#镜像加速"}},[s._v("#")]),s._v(" 镜像加速")]),s._v(" "),a("p",[s._v("然而下载镜像的过程是非常慢的，所以我们需要配置一下镜像源加速下载，访问阿里云官网"),a("a",{attrs:{href:"https://www.aliyun.com",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.aliyun.com"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("点击"),a("code",[s._v("控制台")]),s._v("，搜索"),a("code",[s._v("容器镜像服务")]),s._v("，最后点击容器镜像服务：")]),s._v(" "),a("img",{staticStyle:{zoom:"150%"},attrs:{src:t(452)}}),s._v(" "),a("p",[s._v("点击左侧的镜像加速器，并依次执行右侧的配置指令即可。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" /etc/docker\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tee")]),s._v(" /etc/docker/daemon.json "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<-")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'EOF\'\n{\n  "registry-mirrors": ["https://xxxxxx.mirror.aliyuncs.com"]    #xxxxxx为自己的加速器地址\n}\nEOF')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("完成后能够在上图的实例中心看到运行中的个人实例即可。")]),s._v(" "),a("h2",{attrs:{id:"docker镜像命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker镜像命令"}},[s._v("#")]),s._v(" Docker镜像命令")]),s._v(" "),a("p",[s._v("Docker 需要频繁地操作相关的镜像，所以我们先来了解一下 Docker 中的镜像指令。")]),s._v(" "),a("h3",{attrs:{id:"docker-images"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-images"}},[s._v("#")]),s._v(" docker images")]),s._v(" "),a("p",[s._v("若想查看 Docker 中当前拥有哪些镜像，则可以使用 "),a("code",[s._v("docker images")]),s._v(" 命令。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18305")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY        TAG       IMAGE ID       CREATED         SIZE\nredis             latest    2f66aad5324a   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago     117MB\nmysql             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".32    57da161f45ac   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago     517MB\napache/rocketmq   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.9")]),s._v(".4     a2a50ca263c3   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago    548MB\nhello-world       latest    feb5d9fea6a5   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" months ago   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(".3kB\ntomcat            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".42    2da861e12a55   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" years ago     357MB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[a("code",[s._v("REPOSITORY为")]),s._v("镜像名，"),a("code",[s._v("TAG")]),s._v("为版本标志，"),a("code",[s._v("IMAGE ID")]),s._v("为镜像 id(唯一的)，"),a("code",[s._v("CREATED")]),s._v("为创建时间，注意这个时间并不是我们将镜像下载到 Docker 中的时间，而是镜像创建者创建的时间，"),a("code",[s._v("SIZE")]),s._v("为镜像大小。")])]),a("p",[s._v("我们也能够"),a("strong",[s._v("查询指定镜像名")]),s._v("，如查询mysql镜像：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18305")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images mysql")]),s._v("\nREPOSITORY   TAG       IMAGE ID       CREATED       SIZE\nmysql        "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".32    57da161f45ac   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago   517MB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("若如此做，则会查询出 docker 中的所有 mysql 镜像：")]),s._v(" "),a("p",[s._v("该指令还能够携带-q参数："),a("code",[s._v("docker images -q")]),s._v(" ， -q表示仅显示镜像的 id：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18305")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images -q")]),s._v("\n2f66aad5324a\n57da161f45ac\na2a50ca263c3\nfeb5d9fea6a5\n2da861e12a55\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"docker-pull"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-pull"}},[s._v("#")]),s._v(" docker pull")]),s._v(" "),a("p",[s._v("若是要下载镜像，就可以使用docker pull命令。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull mysql:8.0.32\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("docker pull")]),s._v("是固定的，后面写上需要下载的镜像名及版本标志（tag）；若是不写版本标志，而是直接执行docker pull mysql，则会下载镜像的最新(latest)版本。")]),s._v(" "),a("h3",{attrs:{id:"docker-search"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-search"}},[s._v("#")]),s._v(" docker search")]),s._v(" "),a("p",[s._v("一般在下载镜像前我们需要搜索一下镜像有哪些版本才能对指定版本进行下载，对应命令为"),a("code",[s._v("docker search")]),s._v("，查询mysql已有版本使用指令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search mysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("不过该指令只能查看 mysql 相关的镜像信息，而不能知道有哪些版本，若想知道版本，则只能这样查询：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" search mysql:8.0.32\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("若是查询的版本存在即会显示信息，"),a("strong",[s._v("不存在则结果为空")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"docker-image-rm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-image-rm"}},[s._v("#")]),s._v(" docker image rm")]),s._v(" "),a("p",[s._v("若想要删除某个镜像，就使用"),a("code",[s._v("docker image rm")]),s._v("命令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" hello-world\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("若是不指定版本，则默认删除的也是最新版本。")]),s._v(" "),a("p",[s._v("还可以通过指定镜像 id 进行删除："),a("code",[s._v("docker images hello-world")]),s._v("拿到此镜像id，再通过id进行删除。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" 镜像id\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然而此时报错了：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@izrcf5u3j3q8xaz ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker image rm bf324fb1ae65")]),s._v("\nError response from daemon: conflict: unable to delete bf324fb1ae65 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("must be forced"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" - image is being used by stopped container d5b6c327c151\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("这是因为要删除的hello-world镜像正在运行中，所以无法删除镜像，此时需要强制执行删除，添加"),a("code",[s._v("-f参数")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" image "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" bf324fb1ae65\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("该指令会将镜像和通过该镜像执行的容器全部删除，谨慎使用。")]),s._v(" "),a("p",[s._v("Docker 还提供了删除镜像的简化版本："),a("code",[s._v("docker rmi 镜像名:版本标志")]),s._v(" 。")]),s._v(" "),a("p",[s._v("此时我们即可借助"),a("code",[s._v("rmi")]),s._v("和"),a("code",[s._v("-q")]),s._v("进行一些联合操作，比如现在想删除所有的 mysql 镜像，那么你需要查询出 mysql 镜像的 id，并根据这些 id 一个一个地执行"),a("code",[s._v("docker rmi")]),s._v("进行删除，但是现在，我们可以这样：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" rmi "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images mysql "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-q")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("首先通过 docker images mysql -q 查询出 mysql 的所有镜像 id，-q表示仅查询 id，并将这些 id 作为参数传递给 docker rmi -f 指令，这样所有的 mysql 镜像就都被删除了。")]),s._v(" "),a("h2",{attrs:{id:"docker容器命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker容器命令"}},[s._v("#")]),s._v(" docker容器命令")]),s._v(" "),a("p",[s._v("掌握了镜像的相关命令之后，我们需要了解一下容器的命令，容器是基于镜像的。")]),s._v(" "),a("h3",{attrs:{id:"docker-run"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-run"}},[s._v("#")]),s._v(" docker run")]),s._v(" "),a("p",[s._v("若需要通过镜像运行一个容器，则使用：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run tomcat:8.0.42\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("当然了，运行的前提是你拥有这个镜像，所以先下载镜像：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull tomcat:8.0.42\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("下载完成后就可以运行了。")]),s._v(" "),a("p",[s._v("通过该方式运行的 tomcat 是不能直接被外部访问的，因为容器具有隔离性，若是想直接通过 8080 端口访问容器内部的 tomcat，则需要对宿主机端口与容器内的端口进行映射，"),a("code",[s._v("-p参数")]),s._v("为我们解决了了映射问题：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 tomcat:8.0.42\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("解释一下这两个端口的作用(8080:8080)，第一个 8080 为宿主机端口，第二个 8080 为容器内的端口，外部访问 8080 端口就会通过映射访问容器内的 8080 端口。此时外部就可以访问 tomcat 了。\n"),a("img",{attrs:{src:t(453)}})]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"title"}),a("p",[a("strong",[s._v("补充")]),s._v("：如果使用较新的tomcat版本，可能在访问时会出现问题，因为较新版本的tomcat目录结构发生了变化，想要正常访问，需要做出些许修改，这里不再赘述，可以自行搜索了解。")])]),a("p",[s._v("若是这样进行映射：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8088")]),s._v(":8080 tomcat:8.0.42\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("则外部需访问 8088 端口才能访问 tomcat。需要注意的是，每次运行的容器都是相互独立的，所以同时运行多个 tomcat 容器并不会产生端口的冲突。")]),s._v(" "),a("p",[s._v("容器还能够以后台的方式运行，这样就不会占用终端，使用"),a("code",[s._v("-d参数")]),s._v("以后台方式运行容器：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 tomcat:8.0.42\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("启动容器时默认会给容器一个名称，为了方便这个名称我们一般自己定义，"),a("code",[s._v("--name参数")]),s._v("赋予了我们自定义容器名字的权利，使用指令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" mytomcat tomcat:8.0.42\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("此时的容器名称即为 mytomcat，容器名称必须是唯一的。")]),s._v(" "),a("h3",{attrs:{id:"docker-ps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-ps"}},[s._v("#")]),s._v(" docker ps")]),s._v(" "),a("p",[s._v("运行后查看一下当前运行的容器，请使用 "),a("code",[s._v("docker ps")]),s._v(" 命令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18305")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID   IMAGE           COMMAND             CREATED         STATUS         PORTS                    NAMES\n8ef3ecc5d7bc   tomcat:8.0.42   "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"catalina.sh run"')]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" minutes ago   Up "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" seconds   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:8080-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/tcp   tomcat01\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"title"}),a("p",[a("code",[s._v("CONTAINER_ID")]),s._v("为容器的 id，"),a("code",[s._v("IMAGE")]),s._v("为镜像名，"),a("code",[s._v("COMMAND")]),s._v("为容器内执行的命令，"),a("code",[s._v("CREATED")]),s._v("为容器的创建时间，"),a("code",[s._v("STATUS")]),s._v("为容器的状态，"),a("code",[s._v("PORTS")]),s._v("为容器内服务监听的端口，"),a("code",[s._v("NAMES")]),s._v("为容器的名称。")])]),a("p",[s._v("再来引申一下docker ps中的几个指令参数，比如"),a("code",[s._v("参数-a")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("该参数会将运行和非运行的容器全部列举出来：")]),s._v(" "),a("p",[s._v("如果只查询正在运行的容器 id，我们使用"),a("code",[s._v("参数-q")]),s._v("实现：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-q")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("若是组合"),a("code",[s._v("-qa参数")]),s._v("使用，则查询运行和非运行的所有容器 id：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-qa")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("接下来是容器的停止、重启，因为非常简单，就不过多介绍了。")]),s._v(" "),a("h3",{attrs:{id:"重启-停止"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重启-停止"}},[s._v("#")]),s._v(" 重启&停止")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" restart c2f5d78c5d1a \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("该指令能够"),a("strong",[s._v("重启")]),s._v("指定的容器。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" stop c2f5d78c5d1a \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("该指令能够"),a("strong",[s._v("停止")]),s._v("指定的容器。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" c2f5d78c5d1a \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("该指令能够直接"),a("strong",[s._v("杀死")]),s._v("指定的容器。")]),s._v(" "),a("p",[s._v("以上指令都能够通过"),a("code",[s._v("容器id")]),s._v(" 和"),a("code",[s._v("容器名称")]),s._v("两种方式配合使用。")]),s._v(" "),a("h3",{attrs:{id:"删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除"}},[s._v("#")]),s._v(" 删除")]),s._v(" "),a("p",[s._v("当容器被停止之后，容器虽然不再运行了，但仍然是存在的，若是想删除它，则使用指令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" d5b6c177c151\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("需要注意的是容器的 id 无需全部写出来，只需唯一标识即可。")]),s._v(" "),a("p",[s._v("若是想删除正在运行的容器，则需要添加"),a("code",[s._v("-f参数")]),s._v("强制删除：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" d5b6c177c151\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("若是想删除所有容器，可以先通过"),a("code",[s._v("docker ps -qa")]),s._v("查询出所有容器的 id，然后通过docker rm -f进行删除，使用组合指令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-qa")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"容器日志"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器日志"}},[s._v("#")]),s._v(" 容器日志")]),s._v(" "),a("p",[s._v("当容器以后台的方式运行时，我们无法知晓容器的运行状态，若此时需要查看容器的运行日志，则使用指令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs 289cc00dc5ed\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这样的方式显示的日志并不是实时的，若是想实时显示，需要使用-f参数：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" 289cc00dc5ed\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("通过-t参数还能够显示日志的时间戳，通常与-f参数联合使用：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-ft")]),s._v(" 289cc00dc5ed\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"容器进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器进程"}},[s._v("#")]),s._v(" 容器进程")]),s._v(" "),a("p",[s._v("查看容器内运行了哪些进程，可以使用指令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("top")]),s._v(" 289cc00dc5ed\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"容器交互"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#容器交互"}},[s._v("#")]),s._v(" 容器交互")]),s._v(" "),a("p",[s._v("若是想与容器进行交互，则使用指令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-it")]),s._v(" 289cc00dc5ed "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("此时终端将会进入容器内部，执行的指令都将在容器中生效，在容器内只能执行一些比较简单的指令，如：ls、cd 等，若是想退出容器终端，重新回到 CentOS 中，则执行exit即可。")]),s._v(" "),a("p",[s._v("现在我们已经能够进入容器终端执行相关操作了，那么该如何向 tomcat 容器中部署一个项目呢？")]),s._v(" "),a("h3",{attrs:{id:"docker-cp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-cp"}},[s._v("#")]),s._v(" docker cp")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" ./test.html 8ef3ecc5d7bc:/usr/local/tomcat/webapps \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("通过docker cp指令能够将文件从 CentOS 复制到容器中，./test.html 为 CentOS 中的资源路径，8ef3ecc5d7bc为容器 id，/usr/local/tomcat/webapps 为容器的资源路径，此时 test.html 文件将会被复制到该路径下。")]),s._v(" "),a("p",[s._v("若是想将容器内的文件复制到 CentOS 中，则反过来写即可：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" 8ef3ecc5d7bc:/usr/local/tomcat/webapps/test.html ./\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("所以现在若是想要部署项目，则先将项目上传到 CentOS，然后将项目从 CentOS 复制到容器内，此时启动容器即可。")]),s._v(" "),a("h3",{attrs:{id:"docker-inspect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-inspect"}},[s._v("#")]),s._v(" docker inspect")]),s._v(" "),a("p",[s._v("虽然使用 Docker 启动软件环境非常简单，但同时也面临着一个问题，我们无法知晓容器内部具体的细节，比如监听的端口、绑定的 ip 地址等等，好在这些 Docker 都帮我们想到了，只需使用指令"),a("code",[s._v("docker inspect")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18305")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker inspect 8ef3ecc5d7bc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Id"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8ef3ecc5d7bc5f630b189ff4ddaeb01e3f51645763f4438d977c7feda2b332b6"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Created"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2023-03-07T03:23:29.9904625Z"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Path"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"catalina.sh"')]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Args"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"run"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"State"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Status"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"running"')]),s._v(",\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Running"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" true,\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Paused"')]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" false,\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"docker数据卷"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker数据卷"}},[s._v("#")]),s._v(" Docker数据卷")]),s._v(" "),a("p",[s._v("学习了容器的相关指令之后，我们来了解一下 Docker 中的数据卷，它能够实现宿主机与容器之间的文件共享，它的好处在于我们对宿主机的文件进行修改将直接影响容器，而无需再将宿主机的文件再复制到容器中。")]),s._v(" "),a("p",[s._v("现在若是想将宿主机中/opt/apps目录与容器中webapps目录做一个数据卷，则应该这样编写指令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" mytomcat "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" /opt/apps:/usr/local/tomcat/webapps tomcat:8.0.42\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然而此时访问 tomcat 会发现无法访问：\n"),a("img",{attrs:{src:t(454)}})]),s._v(" "),a("p",[s._v("这就说明我们的数据卷设置成功了，Docker 会将"),a("code",[s._v("容器内的webapps目录")]),s._v("与"),a("code",[s._v("宿主机/opt/apps目录")]),s._v("进行同步，而此时/opt/apps目录是空的，导致webapps目录也会变成空目录，所以就访问不到了。")]),s._v(" "),a("div",{staticClass:"language-she line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@LAPTOP-8N57IKFS opt]# cd ./apps/\n[root@LAPTOP-8N57IKFS apps]# ls\n[root@LAPTOP-8N57IKFS apps]# ls -l\ntotal 0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("我们查看之后确实为空，证明同步成功！")]),s._v(" "),a("p",[s._v("此时我们只需向/opt/apps目录下添加文件，就会使得webapps目录也会拥有相同的文件，达到文件共享，测试一下：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS apps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim test.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS apps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\ntest.html\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS apps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat test.html")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("h"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v("hello docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/h"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("h"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v("This is a test.html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("/h"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("1")]),s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("在/opt/apps目录下创建了一个 test.html 文件，那么容器内的webapps目录是否会有该文件呢？进入容器的终端：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18305")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker exec -it c4a4e6d929bd bash")]),s._v("\nroot@c4a4e6d929bd:/usr/local/tomcat"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# pwd")]),s._v("\n/usr/local/tomcat\nroot@c4a4e6d929bd:/usr/local/tomcat"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd ./webapps/")]),s._v("\nroot@c4a4e6d929bd:/usr/local/tomcat/webapps"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\ntest.html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("容器内确实已经有了该文件，那接下来我们编写一个简单的 Web 应用：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HelloServlet")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServlet")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("protected")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("doGet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletRequest")]),s._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletResponse")]),s._v(" resp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServletException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        resp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getWriter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello Docker"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("protected")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("doPost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletRequest")]),s._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletResponse")]),s._v(" resp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServletException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IOException")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("doGet")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("resp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("这是一个非常简单的 Servlet，我们将其打包上传到/opt/apps中，那么容器内肯定就会同步到该文件，此时进行访问：会输出"),a("code",[s._v("Hello Docker")])]),s._v(" "),a("p",[s._v("这种方式设置的数据卷称为"),a("strong",[s._v("自定义数据卷")]),s._v("，因为数据卷的目录是由我们自己设置的，docker 还为我们提供了另外一种设置数据卷的方式：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" mytomcat "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" aa:/usr/local/tomcat/webapps tomcat:8.0.42\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("此时的aa并不是数据卷的目录，而是数据卷的别名，docker 会为我们自动创建一个名为aa的数据卷，并且会将容器内webapps目录下的所有内容复制到数据卷中，该数据卷在Windows11中DockerHub的位置在固定目录下，可以在"),a("strong",[s._v("文件资源管理器")]),s._v("中通过"),a("code",[s._v("\\\\wsl$\\docker-desktop-data\\data\\docker\\volumes\\")]),s._v("进行获取：")]),s._v(" "),a("img",{attrs:{src:t(455)}}),s._v(" "),a("p",[s._v("此时我们只需修改该目录的内容就能能够影响到容器中的文件。")]),s._v(" "),a("h2",{attrs:{id:"补充"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充"}},[s._v("#")]),s._v(" 补充")]),s._v(" "),a("p",[s._v("最后再介绍几个容器和镜像相关的指令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" commit "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"描述信息"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"镜像作者"')]),s._v(" mytomcat mytomcat:1.0.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("我的举例：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18305")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker commit -m"我的Tomcat" -a"southnorth" mytomcat mytomcat1.0.0')]),s._v("\nsha256:b21c8ec1c1ee6306951fcb1d1bf0a3716a131f28ba366d452878eee6754a121f\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("该指令能够将容器"),a("strong",[s._v("打包")]),s._v("成一个镜像，此时查询镜像：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18305")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY        TAG       IMAGE ID       CREATED         SIZE\nmytomcat1.0.0     latest    b21c8ec1c1ee   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" seconds ago   357MB\nredis             latest    2f66aad5324a   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago     117MB\nmysql             "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".32    57da161f45ac   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" weeks ago     517MB\napache/rocketmq   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.9")]),s._v(".4     a2a50ca263c3   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" months ago    548MB\ntomcat            "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(".42    2da861e12a55   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" years ago     357MB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("若是想将镜像"),a("strong",[s._v("备份")]),s._v("出来，则可以使用指令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" save mytomcat:1.0.0 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" mytomcat-1.0.0.tar\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("我的举例：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18305")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker save mytomcat:1.0.0 -o mytomcat-1.0.0.tar")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18305")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nbin   dev  home  lib    lost+found  mnt  mytomcat-1.0.0.tar  proc  run   srv  tmp  var\nboot  etc  init  lib64  media   opt  root  sbin  sys  usr\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("若是拥有.tar格式的镜像，该如何将其"),a("strong",[s._v("加载")]),s._v("到 Docker 中呢？执行指令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LAPTOP-8N57IKFS "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18305")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker load -i mytomcat-1.0.0.tar")]),s._v("\nb28ef0b6fef8: Loading layer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("105")]),s._v(".5MB/105.5MB\n0b703c74a09c: Loading layer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(".99MB/23.99MB\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\nLoaded image: mytomcat:1.0.0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);